Version 4
SHEET 1 1248 680
WIRE 64 -96 48 -96
WIRE 64 -16 64 -96
WIRE 112 -16 64 -16
WIRE 416 -16 304 -16
WIRE 736 -16 496 -16
WIRE 816 -16 736 -16
WIRE 992 -16 816 -16
WIRE 736 32 736 -16
WIRE 992 48 992 -16
WIRE 32 80 -48 80
WIRE 112 80 32 80
WIRE 352 80 304 80
WIRE 464 80 352 80
WIRE 528 80 464 80
WIRE 640 80 608 80
WIRE 32 96 32 80
WIRE 464 96 464 80
WIRE 352 128 352 80
WIRE 640 144 512 144
WIRE 736 144 736 112
WIRE 736 144 640 144
WIRE 736 176 736 144
WIRE 992 208 992 128
WIRE 352 224 352 192
WIRE 464 224 464 192
WIRE 464 224 352 224
WIRE 32 240 32 176
WIRE 352 240 352 224
WIRE 736 304 736 256
WIRE 992 320 992 288
FLAG 32 240 0
FLAG -32 -96 0
FLAG 816 -16 Vi
FLAG -48 80 Vo
FLAG 64 -96 15V
FLAG 736 304 0
FLAG 352 240 0
FLAG 736 144 vo_ref
FLAG 992 320 0
SYMBOL voltage 64 -96 R90
WINDOW 3 46 58 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 21
SYMATTR InstName V1
SYMBOL Optos\\PC817A 208 32 M0
SYMATTR InstName U1
SYMBOL res 16 80 R0
SYMATTR InstName R1
SYMATTR Value 880
SYMBOL TL431 464 144 M0
SYMATTR InstName U2
SYMBOL res 512 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4.2k
SYMBOL res 720 160 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 720 16 R0
SYMATTR InstName R4
SYMATTR Value 38k
SYMBOL cap 368 192 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 624 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1m
SYMBOL cap 624 80 R0
SYMATTR InstName C2
SYMATTR Value 22n
SYMBOL voltage 992 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL voltage 992 32 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 130m 100k)
SYMATTR Value2 AC 130
TEXT -92 328 Left 2 !;op 20m
TEXT -280 160 Left 2 !.tran 2m
TEXT 176 408 Left 2 !;ac dec 20m 10k 500k
